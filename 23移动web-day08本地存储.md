# 本地存储

## 作用和需求介绍

> 需求说明: 微博发布案例中,将我们自己发布的数据存储在本地,即便我们刷新之后,我们依旧可以看到数据,除非手动删除

> 作用: 将数据存储在用户的本地电脑里面保存,实际工作中一般用于将一些后台数据存储在用户自己的电脑里面

## 语法介绍

> localStorage对象里可以实现将数据永久存储在本地

```js
// 存数据
localStorage.setItem('数据名', '数据');
// 取数据
localStorage.getItem('数据名');
// 删数据
localStorage.removeItem('数据名');
```

Tip:

1. 在控制台中查看 => application => Storage => Local Storage
2. 细节: 如果多次存储同一个key值的数据,后面的数据会覆盖前面的数据 => 将每一次的数据都追加到数组里面去,将数组存储到本地

## JSON数据转换

> localStorage只能存储字符串数据,如果存储复杂数据类型,需要将复杂数据类型转换成JSON数据, 否则数据会丢失

tip: JSON数据可以简单理解为一种固定格式的字符串,一般常见于前后端之间的数据传递.

> JSON数据转换语法

```js
let JSONstr = JSON.stringify(复杂数据); // 将复杂数据转换成JSON字符串
let obj = JSON.parse(JSON字符串); // 将JSON字符串转换成对象或者数组
```

结论: 但凡是复杂数据要想存储在本地, 必须通过`JSON.stringify`转换成JSON字符串才可以, 同样,获取出来的数据也需要通过`JSON.parse`转换成对象或者数组才能使用

> 前置案例运用

```js
// 需求介绍: 每一次点击将当前用户数据添加到本地存储里面去,每一个用户是一个对象数据
// 要求: 每一次点击都需要将数据新增进去,而不是简单的覆盖. 意思就是点击10次应该有10个人的数据,而不是只有一个人的
```

思路:

1. 每一次点击, 获取表单数据,组合成一个对象数据
2. 本地存储没有专门的增语法, 所以需要准备一个数组将每一次的对象数据追加进去
3. 再将这个数组转换成JSON字符串存入到本地数据里面去
4. 每一次刷新的时候,都可以先从本地中将数据获取出来, 放到默认的数组里面 如果没有本地数据, 就用空数组

